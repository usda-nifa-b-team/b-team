var data=[["Agapostemon femoratus","Arnica longifolia",3],
["Agapostemon femoratus","Arnica mollis",2],
["Agapostemon femoratus","Ericameria nauseosa",1],
["Agapostemon femoratus","Eriogonum heracleoides",1],
["Agapostemon femoratus","Helianthus annuus",3],
["Agapostemon femoratus","Hymenoxys hoopesii",4],
["Agapostemon femoratus","Potentilla",3],
["Agapostemon femoratus","Senecio serra",2],
["Agapostemon femoratus","Senecio serra serra",5],
["Agapostemon femoratus","Sphenosciadium capitellatum",2],
["Agapostemon texanus","Helianthus annuus",2],
["Agapostemon virescens","Geranium",1],
["Andrena","Calyptridium umbellatum",3],
["Andrena","Ceanothus velutinus",1],
["Andrena","Hackelia micrantha",3],
["Andrena","Lomatium",2],
["Andrena","Potentilla",7],
["Andrena","Potentilla gracilis",1],
["Andrena","Senecio serra",1],
["Andrena prunorum","Helianthus annuus",1],
["Anthidium manicatum","Cirsium peckii",1],
["Anthidium mormonum","Phacelia heterophylla",1],
["Anthidium tenuiflorae","Phacelia heterophylla",1],
["Anthophora bomboides","Cirsium peckii",2],
["Anthophora exigua","Stephanomeria",1],
["Anthophora terminalis","Agastache urticifolia",2],
["Anthophora terminalis","Senecio serra",1],
["Anthophora urbana","Arnica longifolia",4],
["Anthophora urbana","Cirsium",1],
["Anthophora urbana","Cirsium eatonii peckii",2],
["Anthophora urbana","Cirsium peckii",3],
["Anthophora urbana","Ericameria nauseosa",2],
["Anthophora urbana","Helianthus annuus",1],
["Anthophora urbana","Phacelia heterophylla",3],
["Ashmeadiella","Stephanomeria",4],
["Ashmeadiella californica","Cirsium",4],
["Ashmeadiella californica","Erigeron",1],
["Ashmeadiella californica","Machaeranthera canescens",1],
["Ashmeadiella californica","Stephanomeria",4],
["Ashmeadiella difugita","Stephanomeria",13],
["Atoposmia copelandica","Phacelia",1],
["Atoposmia copelandica","Phacelia hastata",2],
["Bombus appositus","Gentiana affinis",1],
["Bombus appositus","Lupinus",1],
["Bombus appositus","Potentilla",1],
["Bombus centralis","Agastache",1],
["Bombus centralis","Agastache urticifolia",2],
["Bombus centralis","Arnica longifolia",2],
["Bombus centralis","Cirsium",2],
["Bombus centralis","Cirsium eatonii peckii",1],
["Bombus centralis","Cirsium peckii",7],
["Bombus centralis","Lupinus",1],
["Bombus centralis","Phacelia",3],
["Bombus centralis","Phacelia heterophylla",1],
["Bombus centralis","Potentilla",2],
["Bombus centralis","Senecio serra",2],
["Bombus fervidus","Artemisia tridentata",1],
["Bombus fervidus","Cirsium",2],
["Bombus fervidus","Cirsium eatonii peckii",3],
["Bombus fervidus","Cirsium peckii",52],
["Bombus fervidus","Helianthus annuus",2],
["Bombus fervidus","Potentilla",1],
["Bombus fervidus","Sphenosciadium capitellatum",2],
["Bombus fervidus","Stephanomeria",1],
["Bombus flavifrons","Cirsium eatonii peckii",2],
["Bombus flavifrons","Cirsium peckii",2],
["Bombus huntii","Cirsium",1],
["Bombus huntii","Helianthus annuus",1],
["Bombus huntii","Senecio serra",1],
["Bombus insularis","Erigeron",1],
["Bombus insularis","Senecio",1],
["Bombus mixtus","Arnica longifolia",1],
["Bombus mixtus","Cirsium peckii",1],
["Bombus nevadensis","Cirsium",1],
["Bombus nevadensis","Cirsium eatonii peckii",1],
["Bombus nevadensis","Cirsium peckii",5],
["Bombus nevadensis","Potentilla",1],
["Bombus occidentalis","Arnica mollis",1],
["Bombus occidentalis","Ceanothus velutinus",1],
["Bombus sylvicola","Cirsium peckii",1],
["Bombus sylvicola","Erigeron",2],
["Bombus sylvicola","Hymenoxys hoopesii",2],
["Bombus sylvicola","Penstemon",1],
["Bombus sylvicola","Phacelia",3],
["Bombus sylvicola","Potentilla",1],
["Bombus sylvicola","Senecio",2],
["Bombus sylvicola","Senecio serra",1],
["Bombus sylvicola","Sphenosciadium capitellatum",2],
["Bombus vancouverensis","Arnica mollis",2],
["Bombus vancouverensis","Hymenoxys",2],
["Bombus vancouverensis","Hymenoxys hoopesii",1],
["Bombus vancouverensis","Lupinus lepidus",2],
["Bombus vancouverensis","Penstemon",1],
["Bombus vancouverensis","Phacelia",2],
["Bombus vancouverensis","Potentilla",6],
["Bombus vancouverensis","Senecio serra",4],
["Bombus vancouverensis","Sphenosciadium capitellatum",5],
["Ceratina acantha","Cirsium peckii",1],
["Chelostoma phaceliae","Phacelia hastata",1],
["Colletes","Eriogonum",1],
["Diadasia diminuta","Cirsium peckii",1],
["Dianthidium ulkei","Stephanomeria",1],
["Dufourea","Hymenoxys hoopesii",1],
["Halictus confusus","Phacelia hastata",1],
["Halictus farinosus","Arnica mollis",2],
["Halictus farinosus","Potentilla",1],
["Halictus rubicundus","Helianthus annuus",1],
["Hoplitis fulgida","Hackelia micrantha",1],
["Hoplitis fulgida","Phacelia",1],
["Hoplitis fulgida","Sphenosciadium capitellatum",6],
["Hoplitis louisae","Phacelia",1],
["Hoplitis louisae","Potentilla",1],
["Hoplitis plagiostoma","Potentilla",1],
["Hylaeus","Potentilla",2],
["Hylaeus","Senecio serra",3],
["Hylaeus","Taraxia tanacetifolia",2],
["Hylaeus mesillae","Cirsium",1],
["Lasioglossum","Arnica mollis",1],
["Lasioglossum","Ericameria nauseosa",6],
["Lasioglossum","Eriogonum ovalifolium",1],
["Lasioglossum","Helianthus annuus",1],
["Lasioglossum","Hymenoxys hoopesii",1],
["Lasioglossum","Phacelia hastata",1],
["Lasioglossum","Potentilla",4],
["Lasioglossum","Potentilla gracilis",1],
["Lasioglossum","Stephanomeria",2],
["Lasioglossum incompletum","Helianthus annuus",1],
["Lasioglossum inconditum","Symphyotrichum foliaceum",1],
["Lasioglossum ovaliceps","Helianthus annuus",1],
["Lasioglossum ovaliceps","Stephanomeria",1],
["Lasioglossum ruidosense","Arnica mollis",1],
["Lasioglossum ruidosense","Sphenosciadium capitellatum",1],
["Lasioglossum sisymbrii","Arnica mollis",1],
["Lasioglossum sisymbrii","Cirsium peckii",1],
["Megachile inermis","Sphenosciadium capitellatum",2],
["Megachile mellitarsis","Arnica longifolia",1],
["Megachile parallela","Helianthus annuus",1],
["Megachile perihirta","Geranium",1],
["Melissodes","Cirsium peckii",13],
["Melissodes","Ericameria nauseosa",5],
["Melissodes lupinus","Ericameria nauseosa",2],
["Melissodes lupinus","Hymenoxys hoopesii",1],
["Melissodes lustrus","Ericameria nauseosa",1],
["Melissodes microstictus","Senecio serra",1],
["Melissodes rivalis","Cirsium eatonii peckii",1],
["Melissodes rivalis","Potentilla",1],
["Nomada","Hackelia micrantha",1],
["Nomada","Lupinus lepidus",1],
["Nomada","Senecio serra",1],
["Osmia","Agastache urticifolia",1],
["Osmia","Erythranthe lewisii",3],
["Osmia","Lupinus lepidus",2],
["Osmia","Potentilla",1],
["Osmia atrocyanea","Agastache urticifolia",1],
["Osmia brevis","Agastache urticifolia",1],
["Osmia brevis","Potentilla",1],
["Osmia bucephala","Hackelia micrantha",1],
["Osmia calla","Potentilla",1],
["Osmia montana","Hymenoxys hoopesii",1],
["Panurginus","Potentilla",8],
["Sphecodes","Eriogonum",1],
["Sphecodes","Potentilla",1],
["Stelis","Arnica mollis",1],
["Stelis","Phacelia",1],
["Stelis","Potentilla",1]]



 function sort(sortOrder){
                    return function(a,b){ return d3.ascending(sortOrder.indexOf(a),sortOrder.indexOf(b)) }
                  }
var color = {'Unlinked':'#3366CC','Arnica longifolia':'rgb(56,43,61)','Arnica mollis':'rgb(56,43,61)','Ericameria nauseosa':'rgb(56,43,61)','Eriogonum heracleoides':'rgb(56,43,61)','Helianthus annuus':'rgb(56,43,61)','Hymenoxys hoopesii':'rgb(56,43,61)','Potentilla':'rgb(56,43,61)','Senecio serra':'rgb(56,43,61)','Senecio serra serra':'rgb(56,43,61)','Sphenosciadium capitellatum':'rgb(56,43,61)','Geranium':'rgb(56,43,61)','Calyptridium umbellatum':'rgb(56,43,61)','Ceanothus velutinus':'rgb(56,43,61)','Hackelia micrantha':'rgb(56,43,61)','Lomatium':'rgb(56,43,61)','Potentilla gracilis':'rgb(56,43,61)','Cirsium peckii':'rgb(56,43,61)','Phacelia heterophylla':'rgb(56,43,61)','Stephanomeria':'rgb(56,43,61)','Agastache urticifolia':'rgb(56,43,61)','Cirsium':'rgb(56,43,61)','Cirsium eatonii peckii':'rgb(56,43,61)','Erigeron':'rgb(56,43,61)','Machaeranthera canescens':'rgb(56,43,61)','Phacelia':'rgb(56,43,61)','Phacelia hastata':'rgb(56,43,61)','Gentiana affinis':'rgb(56,43,61)','Lupinus':'rgb(56,43,61)','Agastache':'rgb(56,43,61)','Artemisia tridentata':'rgb(56,43,61)','Senecio':'rgb(56,43,61)','Penstemon':'rgb(56,43,61)','Hymenoxys':'rgb(56,43,61)','Lupinus lepidus':'rgb(56,43,61)','Eriogonum':'rgb(56,43,61)','Taraxia tanacetifolia':'rgb(56,43,61)','Eriogonum ovalifolium':'rgb(56,43,61)','Symphyotrichum foliaceum':'rgb(56,43,61)','Erythranthe lewisii':'rgb(56,43,61)'};




var g1 = svg.append("g").attr("transform","translate(408,50)");
                         var bp1=viz.bP()
                         .data(data)
                         .value(d=>d[2])
                         .min(10)
                         .pad(2)
                         .height(1550)
                         .width(400)
                         .barSize(35)
                         .fill(d=>color[d.secondary])
.orient("vertical");

g1.call(bp1);g1.append("text")
                        .attr("x",-50).attr("y",-8)
                        .style("text-anchor","middle")
                        .text("Bees");
                        g1.append("text")
                        .attr("x", 250)
                        .attr("y",-8).style("text-anchor","middle")
                        .text("Plants");
                        g1.append("text")
                        .attr("x",100).attr("y",-25)
                        .style("text-anchor","middle")
                        .attr("class","header")
                        .text("Steens Mountain CMPA");

 g1.selectAll(".mainBars").append("text").attr("class","label")
                        .attr("x",d=>(d.part=="primary"? -48.8:52.4))
                        .attr("y",d=>+6)
                        .text(d=>d.key)
                        .attr("text-anchor",d=>(d.part=="primary"? "end": "start"));

 g1.selectAll(".mainBars").append("text").attr("class","perc")
                        .attr("x",d=>(d.part=="primary"? -340:450))
                        .attr("y",d=>+6)
                        .text(function(d){ return d3.format("0.1%")(d.percent)})
                        .attr("text-anchor",d=>(d.part=="primary"? "end": "start")); 


